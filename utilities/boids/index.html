<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Boids Simulation</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div id="simulationContainer">
        <canvas id="boidsCanvas"></canvas>
    </div>

    <a href="../../index.html" id="backLink"
        style="position:fixed; top:15px; left:15px; color:rgba(255,255,255,0.7); text-decoration:none; z-index:20; font-family:sans-serif; font-weight:bold; background:rgba(0,0,0,0.5); padding:5px 10px; border-radius:4px;">‚Üê
        Back</a>

    <button id="toggleControlsButton">Hide Settings</button>

    <div id="controls">
        <h2>Settings & Tools</h2>

        <div class="control-group">
            <label for="numBoids">Number of Boids</label>
            <input type="range" id="numBoids" min="10" max="600" value="100">
            <span class="value-display" id="numBoidsValue">100</span>
        </div>
        <div class="control-group">
            <label for="maxSpeed">Max Speed</label>
            <input type="range" id="maxSpeed" min="0.5" max="10" step="0.1" value="4">
            <span class="value-display" id="maxSpeedValue">4.0</span>
        </div>
        <div class="control-group">
            <label for="maxForce">Max Force (Turn)</label>
            <input type="range" id="maxForce" min="0.01" max="1.0" step="0.01" value="0.1">
            <span class="value-display" id="maxForceValue">0.10</span>
        </div>
        <div class="control-group">
            <label for="separationDist">Separation Radius</label>
            <input type="range" id="separationDist" min="5" max="100" value="20">
            <span class="value-display" id="separationDistValue">20</span>
        </div>
        <div class="control-group">
            <label for="alignmentDist">Alignment Radius</label>
            <input type="range" id="alignmentDist" min="10" max="200" value="60">
            <span class="value-display" id="alignmentDistValue">60</span>
        </div>
        <div class="control-group">
            <label for="cohesionDist">Cohesion Radius</label>
            <input type="range" id="cohesionDist" min="10" max="200" value="60">
            <span class="value-display" id="cohesionDistValue">60</span>
        </div>
        <div class="control-group">
            <label for="obstacleDetectionDist">Obstacle Repel Radius</label>
            <input type="range" id="obstacleDetectionDist" min="10" max="150" value="30">
            <span class="value-display" id="obstacleDetectionDistValue">30</span>
        </div>
        <div class="control-group">
            <label for="attractObstacleDist">Obstacle Attract Radius</label>
            <input type="range" id="attractObstacleDist" min="10" max="150" value="80">
            <span class="value-display" id="attractObstacleDistValue">80</span>
        </div>
        <div class="control-group">
            <label for="attractForce">Obstacle Attract Force</label>
            <input type="range" id="attractForce" min="0.01" max="1.0" step="0.01" value="0.2">
            <span class="value-display" id="attractForceValue">0.20</span>
        </div>
        <div class="control-group">
            <label for="slowFactor">Slow Zone Factor</label>
            <input type="range" id="slowFactor" min="0.1" max="1.0" step="0.01" value="0.5">
            <span class="value-display" id="slowFactorValue">0.50</span>
        </div>
        <div class="control-group">
            <label for="wallMargin">Wall Avoid Margin</label>
            <input type="range" id="wallMargin" min="10" max="250" value="100">
            <span class="value-display" id="wallMarginValue">100</span>
        </div>


        <div class="control-group checkbox-group">
            <input type="checkbox" id="wrapWalls">
            <label for="wrapWalls">Wrap Walls (Pac-Man style)</label>
        </div>
        <div class="control-group checkbox-group">
            <input type="checkbox" id="showStateColors" checked>
            <label for="showStateColors">Show State Colors</label>
        </div>
        <div class="control-group checkbox-group">
            <input type="checkbox" id="showTrail" checked>
            <label for="showTrail">Show Trail (Motion Blur)</label>
        </div>
        <div class="control-group">
            <label for="trailAlpha">Trail Density</label>
            <input type="range" id="trailAlpha" min="0.1" max="1.0" step="0.01" value="0.3">
            <span class="value-display" id="trailAlphaValue">0.30</span>
        </div>
        <div class="control-group checkbox-group">
            <input type="checkbox" id="showVisualization">
            <label for="showVisualization">Visualize Selected Boid</label>
        </div>
        <span style="font-size:0.8em; color:#bbb; width:100%; text-align:center; margin-top:-5px;">(Click a boid to
            select)</span>


        <div id="legend">
            <div class="legend-item">
                <div class="legend-color" style="background-color: white;"></div>Normal
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #66b3ff;"></div>Cohesion/Attract
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #ffa500;"></div>Separation
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #ff4d4d;"></div>Wall/Repel
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #8B4513;"></div>Slow Zone
            </div>
        </div>

        <div class="radio-group">
            <label>Obstacle Brush Type:</label>
            <div class="radio-option">
                <input type="radio" name="brushType" id="brushTypeRepel" value="repel" checked>
                <label for="brushTypeRepel">
                    <div class="legend-color" style="background-color: #ff4d4d;"></div>Repel
                </label>
            </div>
            <div class="radio-option">
                <input type="radio" name="brushType" id="brushTypeAttract" value="attract">
                <label for="brushTypeAttract">
                    <div class="legend-color" style="background-color: #66b3ff;"></div>Attract
                </label>
            </div>
            <div class="radio-option">
                <input type="radio" name="brushType" id="brushTypeSlow" value="slow">
                <label for="brushTypeSlow">
                    <div class="legend-color" style="background-color: #8B4513;"></div>Slow Zone
                </label>
            </div>
            <div class="radio-option">
                <input type="radio" name="brushType" id="brushTypeErase" value="erase">
                <label for="brushTypeErase">None</label>
            </div>
        </div>

        <div class="control-group">
            <label for="brushSize">Obstacle Brush Size</label>
            <input type="range" id="brushSize" min="5" max="100" value="30">
            <span class="value-display" id="brushSizeValue">30</span>
        </div>

        <div class="button-group">
            <button id="clearObstaclesButton">Clear All Obstacles</button>
        </div>
        <div class="button-group">
            <button id="resetButton">Restart Simulation</button>
        </div>
    </div>

    <script src="script.js"></script>

</body>

</html>